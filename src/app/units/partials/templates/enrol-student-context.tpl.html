<div>
    <h4>
        Batch Import / Export
    </h4>
    <form class="form-horizontal" ng-submit="submitSEUpload()">
        <div class="form-group">
            <label class="col-sm-3 control-label">Enrol</label> <input uploader="seFileUploader" ng-hide="seFileUploader.isHTML5" type="file" class="col-sm-7" accept="text/csv" ng-required="!seFileUploader.isHTML5" nv-file-select="">
            <div uploader="seFileUploader" ng-show="seFileUploader.isHTML5 &amp;&amp; seFileUploader.queue.length == 0" class="drop well col-sm-7" nv-file-over="" nv-file-drop="">
                Drop CSV here
            </div>
            <p ng-show="seFileUploader.queue.length == 1" class="form-control-static">
                {{seFileUploader.queue[0].file.name}}
            </p>
        </div>
        <div class="form-group">
            <input ng-hide="seFileUploader.isUploading || seFileUploader.queue.length == 0" type="submit" class="btn btn-primary form-control col-sm-2 col-sm-offset-3" value="Enrol">
            <div class="col-sm-offset-3 col-sm-6" ng-show="seFileUploader.isUploading">
                <p class="help-block text-center" ng-show="seFileUploader.progress == 100">
                    Please wait for the server to enrol the students...
                </p>
            </div>
        </div>
    </form>
    <form class="form-horizontal" ng-submit="submitWithdrawUpload()">
        <div class="form-group">
            <label class="col-sm-3 control-label">Withdraw</label> <input uploader="withdrawFileUploader" ng-hide="withdrawFileUploader.isHTML5" type="file" class="col-sm-7" accept="text/csv" ng-required="!withdrawFileUploader.isHTML5" nv-file-select="">
            <div uploader="withdrawFileUploader" ng-show="withdrawFileUploader.isHTML5 &amp;&amp; withdrawFileUploader.queue.length == 0" class="drop well col-sm-7" nv-file-over="" nv-file-drop="">
                Drop CSV here
            </div>
            <p ng-show="withdrawFileUploader.queue.length == 1" class="form-control-static">
                {{withdrawFileUploader.queue[0].file.name}}
            </p>
        </div>
        <div class="form-group">
            <input ng-hide="withdrawFileUploader.isUploading || withdrawFileUploader.queue.length == 0" type="submit" class="btn btn-primary form-control col-sm-2 col-sm-offset-3" value="Withdraw">
            <div class="col-sm-offset-3 col-sm-6" ng-show="withdrawFileUploader.isUploading">
                <p class="help-block text-center" ng-show="withdrawFileUploader.progress == 100">
                    Please wait for the server to withdraw the students...
                </p>
            </div>
        </div>
    </form>
    <form class="form-horizontal">
        <div class="form-group">
            <label class="col-sm-3 control-label">Download</label> <button ng-click="requestSEExport()" class="btn btn-primary form-control col-sm-2">Export</button>
        </div>
    </form><!--/batch-io-->
    <h4>
        Enrolled Students
    </h4>
    <form role="search" class="pull-right form-horizontal" style="margin:-50px 0 0px 0;">
        <input id="searchbar" class="input-md form-control" placeholder="Search students, tutors..." type="search" ng-model="studentSearch" typeahead="text for text in unitTypeAheadData(unit)| filter:$viewValue | limitTo:8" typeahead-wait-ms="200" autofocus="">
        <p class="help-block" ng-show="filteredStudents.length &lt; unit.students.length &amp;&amp; filteredStudents.length != 0">
            Showing {{filteredStudents.length}} of {{unit.students.length}} students enrolled.
        </p>
        <p class="help-block" ng-show="filteredStudents.length &lt; unit.students.length &amp;&amp; filteredStudents.length == 0">
            No students found.
        </p>
    </form>
    <table class="table table-condensed table-hover">
        <thead>
            <tr>
                <th>
                    Username
                </th>
                <th>
                    First Name
                </th>
                <th>
                    Last Name
                </th>
                <th>
                    Email
                </th>
                <th>
                    Tutorial
                </th>
                <th>
                    Enrolled
                </th>
            </tr>
        </thead>
        <tbody>
            <tr ng-repeat="student in filteredStudents = (unit.students | filter:studentSearch) | startFrom:(currentPage - 1) * pageSize | limitTo: pageSize">
                <td>
                    <a href="#/projects/{{student.project_id}}?unitRole={{assessingUnitRole.id}}">{{student.student_id}}</a>
                </td>
                <td>
                    {{student.first_name}}
                </td>
                <td>
                    {{student.last_name}}
                </td>
                <td>
                    <a href="mailto:{{student.email}}">{{student.student_email}}</a>
                </td>
                <td>
                    {{student.tutorial.abbreviation}}
                </td>
                <td>
                  <span ng-show="student.enrolled" class="glyphicon glyphicon-ok text-success" ng-click="withdraw(student)"></span>
                  <span ng-hide="student.enrolled" class="glyphicon glyphicon-remove text-danger" ng-click="enrol(student)"></span>
                </td>
            </tr>
        </tbody>
    </table><!--/enrolment-table-->
    <pagination total-items="unit.students.length" ng-model="currentPage" items-per-page="pageSize" max-size="maxSize" class="pagination-sm" boundary-links="true" rotate="false"></pagination>
</div>